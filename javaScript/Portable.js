var portable = [{
    image: "https://cdn.shopify.com/s/files/1/0153/8863/products/astell-kern-ak-xb10-headphone-zone-13983716311103_500x.jpg?v=1589284702",
    name: "EARMAN-SPARROW 4",
    tag: "Portable DAC & Amplifier",
    priceSymbol: "₹",
    price: 6399,
    strike: 7599,
},

{
    image: "https://cdn.shopify.com/s/files/1/0153/8863/products/AudioQuest-DragonFly-Black-02_500x.jpg?v=1604919461",
    name: "ASTELL&KERN AK-110",
    tag: "Portable Bluetooth DAC & Amp",
    priceSymbol: "₹",
    price: 8399,
    strike: 9599,
},

{
    image: "https://cdn.shopify.com/s/files/1/0153/8863/products/Headphone-Zone-Shanling-UP4-1_500x.jpg?v=1584008295",
    name: "SHALING-UP6",
    tag: "Portable Bluetooth DAC & Amp",
    priceSymbol: "₹",
    price: 9399,
    strike: 10099,
},

{
    image: "https://cdn.shopify.com/s/files/1/0153/8863/products/Headphone-Zone-FiiO-BTR5-2021-04_500x.jpg?v=1634540440",
    name: "SHALING-UP4",
    tag: "Portable USB DAC & Amp",
    priceSymbol: "₹",
    price: 8899,
    strike: 9599,
},

{
    image: "https://cdn.shopify.com/s/files/1/0153/8863/products/EarMEn-Sparrow-New-1_500x.jpg?v=1595424552",
    name: "FIIO BTR5-2021",
    tag: "Portable Bluetooth DAC & Amp",
    priceSymbol: "₹",
    price: 1399,
    strike: 1599,
},

{
    image: "https://cdn.shopify.com/s/files/1/0153/8863/products/Headphone-Zone-Fiio-Q3-1_500x.jpg?v=1620643675",
    name: "EARMEN-SPARROW",
    tag: "Portable Bluetooth DAC & Amp",
    priceSymbol: "₹",
    price: 6699,
    strike: 7799,
},

{
    image: "https://cdn.shopify.com/s/files/1/0153/8863/products/Headphone-Zone-TempoTec-MHD-01_300x.jpg?v=1630405684",
    name: "TEMPOTEC 4",
    tag: "Portable DAC & Amplifier",
    priceSymbol: "₹",
    price: 1999,
    strike: 2099,
},

{
    image: "https://cdn.shopify.com/s/files/1/0153/8863/products/Headphone-Zone-ddHiFi-TC35-Pro-Lighting-to-3.5mm-Decoder-_Mountain_-1_500x.jpg?v=1626685210",
    name: "ASTELL&KERN AK-110",
    tag: "Portable Bluetooth DAC & Amp",
    priceSymbol: "₹",
    price: 8399,
    strike: 9599,
},

{
    image: "https://cdn.shopify.com/s/files/1/0153/8863/products/Audio-Quest-Dragonfly-Red-03_500x.jpg?v=1599133770",
    name: "HIDIZ S9-PRO",
    tag: "Portable DAC & Amplifier",
    priceSymbol: "₹",
    price: 1399,
    strike: 1599,
},

{
    image: "https://cdn.shopify.com/s/files/1/0153/8863/products/Headphone-Zone-Shanling-UA1-Pro-Black-02_800x.jpg?v=1631948801",
    name: "TEMPOTEC",
    tag: "Portable DAC & Amplifier",
    priceSymbol: "₹",
    price: 6099,
    strike: 7599,
},

{
    image: "https://cdn.shopify.com/s/files/1/0153/8863/products/EarmenEagle16_500x.jpg?v=1610347315",
    name: "IFI AUDIO",
    tag: "Ultra-Portable USB Amp & DAC",
    priceSymbol: "₹",
    price: 5399,
    strike: 5599,
},

{
    image: "https://cdn.shopify.com/s/files/1/0153/8863/products/73888cca1a01345832162c06ca862018_500x.jpg?v=1640592695",
    name: "TEMPOTEC SONATA 3",
    tag: "Portable DAC & Amplifier",
    priceSymbol: "₹",
    price: 1399,
    strike: 1599,
},

{
    image: "https://cdn.shopify.com/s/files/1/0153/8863/products/Headphone-Zone-Fiio-BTR3K-2_500x.jpg?v=1620904216",
    name: "FIGI XB77",
    tag: "Portable DAC & Amplifier",
    priceSymbol: "₹",
    price: 7799,
    strike: 9599,
},

{
    image: "https://cdn.shopify.com/s/files/1/0153/8863/products/Headphone-Zone-iFi-Audio-hip-dac2-1_500x.jpg?v=1632895132",
    name: "IFI AUDIO-XCAN",
    tag: "Portable DAC & Amplifier",
    priceSymbol: "₹",
    price: 4399,
    strike: 5599,
},

{
    image: "https://cdn.shopify.com/s/files/1/0153/8863/products/Headphone-Zone-iBasso-DC05-Black-02_500x.jpg?v=1636613768",
    name: "CAYIN-RU6",
    tag: "Portable DAC & Amplifier",
    priceSymbol: "₹",
    price: 1399,
    strike: 1599,
},

{
    image: "https://cdn.shopify.com/s/files/1/0153/8863/products/A_K-PEE51-2_300x.jpg?v=1621682307",
    name: "ALO AUDIO-PILOT",
    tag: "Portable Headphone Amp & DAC",
    priceSymbol: "₹",
    price: 8399,
    strike: 9599,
},

{
    image: "https://cdn.shopify.com/s/files/1/0153/8863/products/Headphone-zone-TempoTec-Sonata-hdpro-1_300x.jpg?v=1629288826",
    name: "AIO AUDIO",
    tag: "Portable DAC & Amplifier",
    priceSymbol: "₹",
    price: 3399,
    strike: 4599,
},

{
    image: "https://cdn.shopify.com/s/files/1/0153/8863/products/Headphone-Zone-Cayin-RU6-1160-1160-011_300x.jpg?v=1638015662",
    name: "FIIO-KA4",
    tag: "Portable DAC & Amplifier",
    priceSymbol: "₹",
    price: 2399,
    strike: 3599,
},];


localStorage.setItem("portableData", JSON.stringify("portable"));

var cartArr = JSON.parse(localStorage.getItem("cartItems")) || [];

function displayData(portable) {

    document.querySelector("#container").innerHTML = "";
    portable.map(function (elem, index, array) {
        var div = document.createElement("div");

        var img = document.createElement("img");
        img.setAttribute("src", elem.image);
        img.setAttribute("class","image")

        var name = document.createElement("p");
        name.innerText = elem.name;

        var tag = document.createElement("p");
        tag.innerText = elem.tag;

        var priceDiv = document.createElement("div");

        var price = document.createElement("p");
        price.innerText = "₹ " + elem.price;

 

        var strike = document.createElement("s");
        strike.innerText = elem.strike;

        // add to cart button

        var cart = document.createElement("button");
        cart.innerText = "Add To Cart";
        cart.addEventListener("click", function () {
            addToCart(elem);
        })

        priceDiv.append(price, strike);
        priceDiv.setAttribute("class", "priceDiv");

        div.append(img, name, tag, priceDiv, cart);
        document.querySelector("#container").append(div);
    })

    function addToCart(elem) {
        console.log(elem);
        elem.quant = 1;
        cartArr.push(elem);
        console.log(cartArr)
        localStorage.setItem("cartItems", JSON.stringify(cartArr));
    }

}


displayData(portable)

function sortItems() {
    var sorting = document.querySelector("#sorter").value;

    if (sorting == "H2L") {
        portable.sort(function (a, b) {
            return b.price - a.price;
        })
        displayData(portable);

    }
    else if(sorting === "L2H")
    {
        portable.sort(function (a, b) {
            return a.price - b.price;
        })
        displayData(portable);
    }
}

function search() {
    var searchText = document.getElementById("search").value;
    var filterData = portable.filter(function (elem) {
        return elem.name.trim().toLowerCase().includes(searchText.toLowerCase());
    })
    displayData(filterData);
}